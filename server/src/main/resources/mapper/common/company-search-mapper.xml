<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
회사 검색 모달 Mapper 구현체

작성자 : 함동의
작성일 : 2025.07.30
수정이력 :
- 2025.07.30 : 최초 작성
-->
<mapper namespace="com.olivin.app.common.mapper.CompanySearchMapper">
    <!-- 상품 전체 조회 -->
    <select id="selectAllCompanies" resultType="CompanySearchVO">
        SELECT comp_id
             , comp_name
             , phone
             , note
        FROM   companys
        WHERE  comp_type = '100001'  -- 본사
           OR  comp_type = '100002'  -- 지점
        ORDER BY comp_id
    </select>

    <!-- 조건에 맞는 상품 분류 조회 -->
    <select id="selectCompanyList" parameterType="String" resultType="CompanySearchVO">
        SELECT comp_id
             , comp_name
             , phone
             , note
        FROM   companys
        WHERE  (comp_type = '100001'  -- 본사
           OR  comp_type = '100002'  -- 지점)
        <if test="searchValue != null and searchValue != ''">
          AND (comp_name LIKE '%' || #{searchValue} || '%'
           OR comp_id LIKE '%' || #{searchValue} || '%')
        </if>
        ORDER BY comp_id
    </select>
</mapper>